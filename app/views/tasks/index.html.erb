<h1><%= t('view.task_list') %></h1>
<p><%= notice %></p>

<p>タスク検索</p>
<%= form_with(model: @task, method: :get, local: true, url: tasks_path) do |form| %>
<div>
  <%= form.text_field :name %>
<p>ステータス検索</p>
<%= form.select :status, {'未着手': 0, '着手中': 1, '完了': 2},include_blank: '選択してください' %>
</div>
<button type="button" class="btn btn-primary"><%= form.submit '検索' %></button>
<% end %>

<table>
  <head>
    <tr>
      <th><%= t('view.task_name') %></th>
      <th><%= t('view.task_detail') %></th>
      <th><%= t('view.task_deadline') %></th>
      <th><%= t('view.task_status') %></th>
      <th><%= t('view.task_priority') %></th>
    </tr>
  </head>
  <body>
    <% @tasks.each do |task| %>
      <tr>
        <td class = "task_row" ><%= task.name %></td>
        <td><%= task.detail %></td>
        <td><%= task.deadline %></td>
        <td><%= task.status_i18n %></td>
        <td><%= task.priority_i18n %></td>
        <td><%= link_to t('view.check_task_detail'),task_path(task.id) %></td>
        <td><%= link_to t('view.edit_task'),edit_task_path(task.id) %></td>
        <td><%= link_to t('view.delete_task'),task_path(task.id), method: :delete ,data: { confirm: t('view.confirm') } %></td>
      </tr>
    <% end %>
  </body>
</table>
<br>

<%= link_to t('view.create_task'), new_task_path %>
<%= link_to "終了期限でソートする", tasks_path(sort_expired: "true") %>
<%= link_to "優先度高い順でソートする", tasks_path(sort_priority_high: "true") %>
<%= paginate @tasks %>
